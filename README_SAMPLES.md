# 示例流程学习指南

已预置 5 个不同复杂度的 BPMN 流程示例，供学习使用。

## 示例流程列表

### 1. 01-简单流程
**难度**: ⭐  
**描述**: 最简单的流程，只有开始和结束事件  
**学习点**: 
- 了解 BPMN 基本结构
- 学习开始事件和结束事件
- 学习顺序流（Sequence Flow）

**流程**: 开始 → 结束

---

### 2. 02-用户任务流程
**难度**: ⭐⭐  
**描述**: 包含用户任务的流程，需要填写表单  
**学习点**:
- 用户任务（User Task）的使用
- 表单字段定义（string、boolean 类型）
- 表单数据收集

**流程**: 开始 → 填写信息（用户任务）→ 结束

**表单字段**:
- 姓名 (string)
- 邮箱 (string)
- 同意条款 (boolean)

---

### 3. 03-条件分支流程
**难度**: ⭐⭐⭐  
**描述**: 包含条件分支的流程，根据输入数字的大小走不同路径  
**学习点**:
- 脚本任务（Script Task）的使用
- 排他网关（Exclusive Gateway）的使用
- 条件表达式（Condition Expression）
- 流程分支逻辑

**流程**: 开始 → 输入数字（用户任务）→ 检查数字（脚本任务）→ 判断大小（网关）→ 处理大数字/处理小数字（脚本任务）→ 结束

**测试建议**:
- 输入大于 10 的数字，观察走"大于10"分支
- 输入小于等于 10 的数字，观察走"小于等于10"分支

---

### 4. 04-审批流程
**难度**: ⭐⭐⭐⭐  
**描述**: 完整的审批流程，包含申请提交、金额判断、审批等步骤  
**学习点**:
- 复杂的业务流程设计
- 条件判断和自动处理
- 多步骤用户交互

**流程**: 
1. 开始
2. 提交申请（用户任务：填写申请人、金额、理由）
3. 计算处理（脚本任务：判断是否需要审批）
4. 判断是否需要审批（网关）
   - 金额 > 10000：需要审批 → 审批（用户任务）
   - 金额 ≤ 10000：自动通过（脚本任务）
5. 结束

**测试建议**:
- 测试金额 > 10000 的情况，需要人工审批
- 测试金额 ≤ 10000 的情况，自动通过

---

### 5. 05-订单处理流程
**难度**: ⭐⭐⭐⭐⭐  
**描述**: 订单处理流程，包含订单创建、库存检查、订单确认等  
**学习点**:
- 完整的业务场景设计
- 多个条件分支
- 成功和失败两种结束路径

**流程**:
1. 开始
2. 创建订单（用户任务：填写客户、产品、数量、单价）
3. 计算总价（脚本任务）
4. 检查库存（脚本任务）
5. 库存判断（网关）
   - 有库存：确认订单（用户任务）→ 成功结束
   - 无库存：拒绝订单（脚本任务）→ 失败结束

**测试建议**:
- 测试数量 ≤ 100 的情况（有库存）
- 测试数量 > 100 的情况（无库存）

---

## 如何使用示例流程

### 方法 1: 通过前端界面

1. 访问 http://localhost:3002
2. 进入"流程定义管理"页面
3. 查看已预置的 5 个示例流程
4. 点击"查看"可以查看流程的 XML 定义
5. 进入"工作流演示"页面
6. 选择任意一个流程，创建实例并执行

### 方法 2: 查看 XML 定义

1. 在"流程定义管理"页面，点击"查看"按钮
2. 可以查看完整的 BPMN XML 定义
3. 点击"编辑"可以修改流程定义
4. 参考 XML 结构学习如何编写自己的流程

### 方法 3: 通过 API

```bash
# 获取所有流程
curl http://localhost:2222/bpmn_processes

# 获取单个流程
curl http://localhost:2222/bpmn_processes/1
```

## 学习路径建议

1. **初学者**: 从"01-简单流程"开始，了解基本结构
2. **进阶**: 学习"02-用户任务流程"，了解用户交互
3. **中级**: 学习"03-条件分支流程"，掌握流程分支
4. **高级**: 学习"04-审批流程"和"05-订单处理流程"，理解复杂业务场景

## 实践建议

1. **先执行再修改**: 先完整执行一遍流程，理解流程逻辑
2. **修改参数**: 尝试修改流程中的参数，观察不同结果
3. **查看 XML**: 仔细查看 XML 定义，理解每个元素的作用
4. **创建新流程**: 基于示例创建自己的流程

## 常见问题

### Q: 如何查看流程执行状态？
A: 在"流程实例管理"页面可以查看所有流程实例及其状态。

### Q: 如何修改流程？
A: 在"流程定义管理"页面，点击"编辑"按钮，修改 XML 定义后保存。

### Q: 流程执行失败怎么办？
A: 检查 XML 定义是否正确，确保所有元素的 ID 唯一，连接关系正确。

### Q: 如何创建自己的流程？
A: 参考示例流程的 XML 结构，在"流程定义管理"页面创建新流程。

## 更多资源

- BPMN 指南: `frontend/BPMN_GUIDE.md`
- 项目示例: `bpmn/ducky.bpmn`
- API 文档: http://localhost:2222/docs

